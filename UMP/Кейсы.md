## Простой закуп под заказы покупателей

Это самый распространенный, наверное, вариант для торговли. Есть заказы покупателей, есть склад, есть заказы поставщикам.
УМП настраивается так:
•	Потребности – заказы покупателей;
•	Ресурсы:
1.	Остатки на складах;
2.	Заказы поставщикам.

На выходе имеем дефицитную ведомость – каких позиций и в каком количестве не хватает, и нужно их закупить.

## Простой закуп, с учетом графиков

Если важно учитывать плановые даты отгрузок и поставок от поставщиков, то настройка УМП немного изменится (по сравнению с предыдущим вариантом).
•	Потребности – заказы покупателей, с выводом даты потребности. Сортировка – по возрастанию даты потребности.
•	Ресурсы:
1.	Остатки на складах;
2.	Заказы поставщикам с выводом даты доступности, сортировка по возрастанию даты доступности;
•	Сопоставление:
1.	Со складом – простое, по номенклатуре;
2.	С заказами поставщикам – через СКД, в отборе указать Дата потребности ≥ Даты доступности.

Лично я делал чуть сложнее – добавлял еще 1-2 этапа сопоставления заказов покупателей с заказами поставщикам, где менял условие сопоставления – например, ставил Дата доступности ≤ Дата потребности + 7 дней, или Дата доступности ≤ Дата потребности + 14 дней.
В итоге получал более понятные результаты распределения:
1.	Заказы, которые уже можно отгружать (все есть на складе);
2.	Заказы, которые отгрузятся по графику (плановые даты прихода от поставщиков меньше, чем дата отгрузки);
3.	Заказы, которые отгрузятся с опозданием в неделю;
4.	Заказы, которые отгрузятся с опозданием в 2 недели;
5.	Ну и заказы, которые вообще нет шанса отгрузить при таком подходе к снабжению.

## ТОС (барабан-буфер-веревка)

Закуп по методу ББВ реализуется элементарно. Единственное, что нужно иметь вне УМП – целевые уровни, или размеры буферов по номенклатурам.
В УПП можно использовать документ «Установка значений точки заказа». Вносите номенклатуру, указываете количества, и идете настраивать УМП.

Лично я добавил отдельный документ, назвал «Установка целевых уровней», потому что хотел иметь целевые уровни по деталям, из которых состоит оборудование, зная целевой уровень на это оборудование. При этом, нужны были отдельные целевые уровни на детали. Документ разузловывал оборудование, получал детали, смешивал с отдельными целевыми уровнями на детали, получал общий размер буфера.

Настройка УМП для целевых уровней очень простая:
•	Потребности: целевые уровни, номенклатура и количество;
•	Ресурсы: 
1.	Остатки на складах, с отбором. Цеховые склады не брал, т.к. если деталь уехала в цех, то ее, считай, уже нет;
2.	Заказы поставщикам, чтобы знать, что из недостающего уже заказано, а что еще нет.

В итоге имеем два показателя:
1.	Статус буфера по каждой номенклатуре – это отношение остатка на складе к целевому уровню;
2.	Статус предзаказа – это отношение остатка на складе + заказа поставщику к целевому уровню.

Статус буфера показывает, насколько наполнен склад фактически.
Статус предзаказа показывает, насколько выполнена функция размещения. Статус предзаказа – главный источник задач для снабженцев.

Статус традиционно выражаются в процентах и делятся на три зоны:
•	Красная – от 0 до 33 %;
•	Желтая – от 33 до 66 %;
•	Зеленая – от 66 до 100 %.

Я еще добавлял фиолетовую зону (> 100 %), чтобы видеть избыточное количество какой-то позиции.

В какой зоне ставить задачу на закуп – решается на месте, т.к. зависит от особенностей работы предприятия. Я ставил, начиная с желтой.

## ТОС с учетом заказов

Когда спрос рваный по времени и количеству, может потребоваться защитный контур. Например, может поступить заказ с достаточно коротким сроком исполнения и количеством, превышающим размер буфера. Это еще неплохой случай, т.к. его хорошо видно невооруженным взглядом.
А может поступить 10 заказов от разных покупателей, каждый по 1/3 буфера, т.е. сам по себе заказ не вызывает подозрений. Но в сумме эти 10 заказов составляют три размера буфера. Если они все по дате отгрузки попадут в 1-2 периода пополнения, то может наступить жесткий дефицит.
Чтобы избежать такой ситуации, я стал считать заказ свершившимся расходом, как будто это не заказ, а реализация. Такая жесткая форма автоматического резервирования.
В УМП это настроил так. Взял настройку из обычного ТОС, и сделал ее двухэтапной, т.е. состоящей из двух профилей.

Первый профиль:
•	Потребности – заказы покупателей;
•	Ресурсы:
1.	Остатки на складах;
2.	Заказы поставщикам;

На выходе имеем:
•	Неиспользуемые ресурсы (склад и заказы поставщикам);
•	Незакрытые заказы покупателей;

Второй профиль:
•	Потребности – целевые уровни;
•	Ресурсы – неиспользованные ресурсы 1-го профиля.

Первый профиль как бы выполняет резервирование, получает свободные остатки склада и заказов поставщикам. Эти свободные остатки используются вторым профилем, как ресурсы.
Статус буфера считается здесь немного иначе, он равен свободным остаткам за вычетом незакрытых заказов покупателей, поделить на целевые уровни.

Использование вычитания в делимом позволяет добиться важной фишки – возможности появления отрицательного статуса буфера. Я его назвал черной зоной – это когда все очень плохо, и работать надо очень срочно.

Есть вариант попроще – в потребностях складывать целевой уровень и заказы покупателей. Но мне он не нравится, т.к. не дает черной зоны – будет только разный процент красноты, т.е. визуально одно и то же. Поэтому рекомендую использовать черную зону.
